#!/usr/bin/env python3
"""
üöÄ –ó–∞–ø—É—Å–∫ Photo Batch Processing Server
"""

import uvicorn
import sys
import os
from pathlib import Path

def main():
    print("üöÄ –ó–∞–ø—É—Å–∫ Photo Batch Processing Server...")
    print("üìÅ –°–æ–∑–¥–∞–Ω–∏–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã—Ö –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–π...")
    
    # –°–æ–∑–¥–∞–µ–º –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏
    directories = ["batch_input", "batch_output", "temp", "templates"]
    for directory in directories:
        Path(directory).mkdir(exist_ok=True)
        print(f"‚úÖ {directory}")
    
    print(f"\nüåê –°–µ—Ä–≤–µ—Ä –±—É–¥–µ—Ç –¥–æ—Å—Ç—É–ø–µ–Ω –ø–æ –∞–¥—Ä–µ—Å—É: http://localhost:8000")
    print(f"üìä API –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è: http://localhost:8000/docs")
    print(f"üîÑ –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ ComfyUI –∑–∞–ø—É—â–µ–Ω –Ω–∞ http://localhost:8188")
    print(f"\nüöÄ –ó–∞–ø—É—Å–∫ —Å–µ—Ä–≤–µ—Ä–∞...\n")
    
    try:
        uvicorn.run(
            "photo_batch_server:app",
            host="0.0.0.0",
            port=8000,
            reload=True,
            reload_dirs=[".", "templates"],
            log_level="info"
        )
    except KeyboardInterrupt:
        print("\nüõë –°–µ—Ä–≤–µ—Ä –æ—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º")
    except Exception as e:
        print(f"‚ùå –û—à–∏–±–∫–∞ –∑–∞–ø—É—Å–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞: {e}")
        sys.exit(1)

if __name__ == "__main__":
    main() 