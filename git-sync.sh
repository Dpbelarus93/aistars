#!/bin/bash

# –§—É–Ω–∫—Ü–∏—è –¥–ª—è —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –≤—Ä–µ–º–µ–Ω–∏
timestamp() {
  date "+%Y-%m-%d %H:%M:%S"
}

echo "[$(timestamp)] üïâÔ∏è –ù–∞—á–∏–Ω–∞–µ–º —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—é —Å GitHub..."

# –ü—Ä–æ–≤–µ—Ä—è–µ–º —Å—Ç–∞—Ç—É—Å SUCCESS_HISTORY.md
if git diff --quiet SUCCESS_HISTORY.md; then
    echo "[$(timestamp)] ‚ÑπÔ∏è –ù–µ—Ç –Ω–æ–≤—ã—Ö —É—Å–ø–µ—à–Ω—ã—Ö –∑–∞–¥–∞—á –¥–ª—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏"
else
    echo "[$(timestamp)] üìù –û–±–Ω–∞—Ä—É–∂–µ–Ω—ã –Ω–æ–≤—ã–µ —É—Å–ø–µ—à–Ω—ã–µ –∑–∞–¥–∞—á–∏"
    
    # –î–æ–±–∞–≤–ª—è–µ–º SUCCESS_HISTORY.md –∏ —Å–≤—è–∑–∞–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã
    git add SUCCESS_HISTORY.md
    git add .cursor/rules/*.mdc
    
    # –°–æ–∑–¥–∞–µ–º –∫–æ–º–º–∏—Ç —Å —ç–º–æ–¥–∑–∏ –∏ timestamp
    git commit -m "üìà –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —É—Å–ø–µ—à–Ω—ã—Ö –∑–∞–¥–∞—á [$(timestamp)]"
    
    # –ü—É—à–∏–º –∏–∑–º–µ–Ω–µ–Ω–∏—è
    git push origin main
    
    echo "[$(timestamp)] ‚úÖ –£—Å–ø–µ—à–Ω–æ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞–Ω–æ —Å GitHub"
fi

# –ü—Ä–æ–≤–µ—Ä—è–µ–º –Ω–∞–ª–∏—á–∏–µ –¥—Ä—É–≥–∏—Ö –∏–∑–º–µ–Ω–µ–Ω–∏–π –≤ –ø—Ä–æ–µ–∫—Ç–µ
if ! git diff --quiet || ! git diff --cached --quiet; then
    echo "[$(timestamp)] üîÑ –û–±–Ω–∞—Ä—É–∂–µ–Ω—ã –¥—Ä—É–≥–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤ –ø—Ä–æ–µ–∫—Ç–µ"
    echo "–î–ª—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ –≤—Å–µ—Ö –∏–∑–º–µ–Ω–µ–Ω–∏–π –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∫–æ–º–∞–Ω–¥—ã:"
    echo "git add ."
    echo "git commit -m \"–í–∞—à–µ —Å–æ–æ–±—â–µ–Ω–∏–µ\""
    echo "git push origin main"
fi
