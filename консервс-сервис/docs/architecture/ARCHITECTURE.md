# üèóÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –ö–æ–Ω—Å–µ—Ä–≤—Å-–°–µ—Ä–≤–∏—Å–∞

## üìã –û–±–∑–æ—Ä –°–∏—Å—Ç–µ–º—ã

–ö–æ–Ω—Å–µ—Ä–≤—Å-—Å–µ—Ä–≤–∏—Å –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è–µ—Ç —Å–æ–±–æ–π —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—É—é –ø–ª–∞—Ç—Ñ–æ—Ä–º—É –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —É—Å–ª—É–≥–∞–º–∏, –ø–æ—Å—Ç—Ä–æ–µ–Ω–Ω—É—é –Ω–∞ –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å–Ω–æ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–µ —Å –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–µ–π AI-–∞–≥–µ–Ω—Ç–∞.

## üîÑ –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–µ –ü—Ä–∏–Ω—Ü–∏–ø—ã

### 1. **–†–∞–∑–¥–µ–ª–µ–Ω–∏–µ –û—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏**
- **Frontend**: –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –∏ UX
- **Backend**: –ë–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞ –∏ API
- **AI-Agent**: –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è –∏ –æ–±—Ä–∞–±–æ—Ç–∫–∞ –µ—Å—Ç–µ—Å—Ç–≤–µ–Ω–Ω–æ–≥–æ —è–∑—ã–∫–∞
- **Database**: –•—Ä–∞–Ω–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –∏ —Å–æ—Å—Ç–æ—è–Ω–∏–π

### 2. **–ú–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å**
- –ì–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω–æ–µ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–µ—Ä–≤–∏—Å–æ–≤
- –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ —Å Redis
- –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –∑–∞–¥–∞—á

### 3. **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å**
- JWT –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è
- RBAC (Role-Based Access Control)
- –í–∞–ª–∏–¥–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö –Ω–∞ –≤—Å–µ—Ö —É—Ä–æ–≤–Ω—è—Ö
- Rate limiting

## üèõÔ∏è –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –°–∏—Å—Ç–µ–º—ã

### Frontend (React + TypeScript)
```
frontend/
‚îú‚îÄ‚îÄ src/
‚îÇ   ‚îú‚îÄ‚îÄ components/     # –ü–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã
‚îÇ   ‚îú‚îÄ‚îÄ pages/          # –°—Ç—Ä–∞–Ω–∏—Ü—ã –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
‚îÇ   ‚îú‚îÄ‚îÄ hooks/          # Custom React hooks
‚îÇ   ‚îú‚îÄ‚îÄ store/          # Redux store
‚îÇ   ‚îú‚îÄ‚îÄ services/       # API –∫–ª–∏–µ–Ω—Ç—ã
‚îÇ   ‚îî‚îÄ‚îÄ utils/          # –£—Ç–∏–ª–∏—Ç—ã
‚îî‚îÄ‚îÄ public/             # –°—Ç–∞—Ç–∏—á–µ—Å–∫–∏–µ —Ñ–∞–π–ª—ã
```

**–ö–ª—é—á–µ–≤—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏:**
- Responsive –¥–∏–∑–∞–π–Ω
- Real-time —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è (Socket.IO)
- –û—Ñ–ª–∞–π–Ω —Ä–µ–∂–∏–º (PWA)
- –ú–Ω–æ–≥–æ—è–∑—ã—á–Ω–æ—Å—Ç—å (i18n)

### Backend (Node.js + Express + TypeScript)
```
backend/
‚îú‚îÄ‚îÄ src/
‚îÇ   ‚îú‚îÄ‚îÄ routes/         # API –º–∞—Ä—à—Ä—É—Ç—ã
‚îÇ   ‚îú‚îÄ‚îÄ controllers/    # –ö–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä—ã
‚îÇ   ‚îú‚îÄ‚îÄ services/       # –ë–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞
‚îÇ   ‚îú‚îÄ‚îÄ models/         # –ú–æ–¥–µ–ª–∏ –¥–∞–Ω–Ω—ã—Ö
‚îÇ   ‚îú‚îÄ‚îÄ middleware/     # –ü—Ä–æ–º–µ–∂—É—Ç–æ—á–Ω–æ–µ –ü–û
‚îÇ   ‚îú‚îÄ‚îÄ utils/          # –£—Ç–∏–ª–∏—Ç—ã
‚îÇ   ‚îî‚îÄ‚îÄ config/         # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
‚îî‚îÄ‚îÄ tests/              # –¢–µ—Å—Ç—ã
```

**API Endpoints:**
- `/api/auth` - –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è
- `/api/users` - –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏
- `/api/orders` - –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∑–∞–∫–∞–∑–∞–º–∏
- `/api/chat` - –ß–∞—Ç –∏ —Å–æ–æ–±—â–µ–Ω–∏—è
- `/api/payments` - –ü–ª–∞—Ç–µ–∂–∏
- `/api/analytics` - –ê–Ω–∞–ª–∏—Ç–∏–∫–∞

### AI-Agent (Python + FastAPI)
```
ai-agent/
‚îú‚îÄ‚îÄ src/
‚îÇ   ‚îú‚îÄ‚îÄ core/           # –Ø–¥—Ä–æ AI-–∞–≥–µ–Ω—Ç–∞
‚îÇ   ‚îú‚îÄ‚îÄ models/         # ML –º–æ–¥–µ–ª–∏
‚îÇ   ‚îú‚îÄ‚îÄ services/       # AI —Å–µ—Ä–≤–∏—Å—ã
‚îÇ   ‚îú‚îÄ‚îÄ utils/          # –£—Ç–∏–ª–∏—Ç—ã
‚îÇ   ‚îî‚îÄ‚îÄ training/       # –û–±—É—á–µ–Ω–∏–µ –º–æ–¥–µ–ª–µ–π
‚îú‚îÄ‚îÄ data/               # –î–∞–Ω–Ω—ã–µ –¥–ª—è –æ–±—É—á–µ–Ω–∏—è
‚îî‚îÄ‚îÄ tests/              # –¢–µ—Å—Ç—ã
```

**–í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ AI-–∞–≥–µ–Ω—Ç–∞:**
- –û–±—Ä–∞–±–æ—Ç–∫–∞ –µ—Å—Ç–µ—Å—Ç–≤–µ–Ω–Ω–æ–≥–æ —è–∑—ã–∫–∞
- –ö–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏—è –∑–∞—è–≤–æ–∫
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –æ—Ç–≤–µ—Ç—ã
- –ê–Ω–∞–ª–∏–∑ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∏–π
- –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

## üóÑÔ∏è –ë–∞–∑–∞ –î–∞–Ω–Ω—ã—Ö

### PostgreSQL Schema
```sql
-- –û—Å–Ω–æ–≤–Ω—ã–µ —Ç–∞–±–ª–∏—Ü—ã
Users (id, email, role, status, ...)
Orders (id, title, status, client_id, manager_id, ...)
Messages (id, content, user_id, order_id, ...)
ChatSessions (id, user_id, is_active, ...)
Payments (id, amount, status, order_id, ...)
AIKnowledge (id, question, answer, category, ...)
```

### Redis Cache
- –°–µ—Å—Å–∏–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- –ö—ç—à API –æ—Ç–≤–µ—Ç–æ–≤
- Rate limiting –¥–∞–Ω–Ω—ã–µ
- Real-time –¥–∞–Ω–Ω—ã–µ

## üîÑ –ü–æ—Ç–æ–∫ –î–∞–Ω–Ω—ã—Ö

### 1. –°–æ–∑–¥–∞–Ω–∏–µ –ó–∞–∫–∞–∑–∞
```mermaid
sequenceDiagram
    Client->>Frontend: –°–æ–∑–¥–∞—Ç—å –∑–∞–∫–∞–∑
    Frontend->>Backend: POST /api/orders
    Backend->>Database: –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –∑–∞–∫–∞–∑
    Backend->>AI-Agent: –ê–Ω–∞–ª–∏–∑ –∑–∞–∫–∞–∑–∞
    AI-Agent->>Backend: –ö–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏—è + —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏
    Backend->>Frontend: –†–µ–∑—É–ª—å—Ç–∞—Ç
    Frontend->>Client: –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ
```

### 2. AI-–û–±—Ä–∞–±–æ—Ç–∫–∞ –°–æ–æ–±—â–µ–Ω–∏–π
```mermaid
sequenceDiagram
    Client->>Frontend: –û—Ç–ø—Ä–∞–≤–∏—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ
    Frontend->>Backend: POST /api/chat/message
    Backend->>AI-Agent: –û–±—Ä–∞–±–æ—Ç–∞—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ
    AI-Agent->>VectorDB: –ü–æ–∏—Å–∫ –∑–Ω–∞–Ω–∏–π
    AI-Agent->>LLM: –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –æ—Ç–≤–µ—Ç–∞
    AI-Agent->>Backend: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –æ—Ç–≤–µ—Ç
    Backend->>Frontend: WebSocket —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ
    Frontend->>Client: –ü–æ–∫–∞–∑–∞—Ç—å –æ—Ç–≤–µ—Ç
```

## üîê –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

### –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è
```typescript
// JWT —Ç–æ–∫–µ–Ω—ã
interface JWTPayload {
  userId: string;
  email: string;
  role: UserRole;
  exp: number;
}

// Middleware –ø—Ä–æ–≤–µ—Ä–∫–∏
const authMiddleware = (req, res, next) => {
  const token = req.headers.authorization?.split(' ')[1];
  const decoded = jwt.verify(token, JWT_SECRET);
  req.user = decoded;
  next();
};
```

### –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è (RBAC)
```typescript
enum UserRole {
  CLIENT = 'CLIENT',
  MANAGER = 'MANAGER',
  CONTRACTOR = 'CONTRACTOR',
  ADMIN = 'ADMIN'
}

const rolePermissions = {
  [UserRole.CLIENT]: ['order:create', 'order:view:own'],
  [UserRole.MANAGER]: ['order:view:all', 'order:assign'],
  [UserRole.ADMIN]: ['*']
};
```

## üìä –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

### –ú–µ—Ç—Ä–∏–∫–∏
- –í—Ä–µ–º—è –æ—Ç–≤–µ—Ç–∞ API
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Ä–µ—Å—É—Ä—Å–æ–≤
- –û—à–∏–±–∫–∏ –∏ –∏—Å–∫–ª—é—á–µ–Ω–∏—è
- –ê–∫—Ç–∏–≤–Ω–æ—Å—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

### –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
```typescript
// Structured logging
logger.info('Order created', {
  orderId: order.id,
  clientId: order.clientId,
  amount: order.budget,
  timestamp: new Date().toISOString()
});
```

## üöÄ –†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ

### Docker Compose
```yaml
services:
  frontend:
    build: ./frontend
    ports: ["3000:3000"]
  
  backend:
    build: ./backend
    ports: ["3001:3001"]
    depends_on: [database, redis]
  
  ai-agent:
    build: ./ai-agent
    ports: ["8000:8000"]
    depends_on: [database]
  
  database:
    image: postgres:14
    environment:
      POSTGRES_DB: conserv_service
  
  redis:
    image: redis:7-alpine
```

### CI/CD Pipeline
1. **Test**: –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤
2. **Build**: –°–±–æ—Ä–∫–∞ Docker –æ–±—Ä–∞–∑–æ–≤
3. **Deploy**: –†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ –≤ production
4. **Monitor**: –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∑–¥–æ—Ä–æ–≤—å—è —Å–∏—Å—Ç–µ–º—ã

## üìà –ü–ª–∞–Ω—ã –ú–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏—è

### –§–∞–∑–∞ 1: –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è
- –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ API –æ—Ç–≤–µ—Ç–æ–≤
- –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –∑–∞–ø—Ä–æ—Å–æ–≤ –∫ –ë–î
- CDN –¥–ª—è —Å—Ç–∞—Ç–∏–∫–∏

### –§–∞–∑–∞ 2: –ú–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å—ã
- –í—ã–¥–µ–ª–µ–Ω–∏–µ —Å–µ—Ä–≤–∏—Å–æ–≤: User, Order, Payment, Notification
- Message queue (RabbitMQ/Apache Kafka)
- Service mesh (Istio)

### –§–∞–∑–∞ 3: –ì–ª–æ–±–∞–ª—å–Ω–æ–µ –ú–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ
- Geo-distributed database
- Multi-region deployment
- Edge computing

---

*–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Ä–∞–∑—Ä–∞–±–æ—Ç–∞–Ω–∞ —Å —É—á–µ—Ç–æ–º —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã—Ö –ø—Ä–∞–∫—Ç–∏–∫ –∏ –≥–æ—Ç–æ–≤–∞ –∫ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏—é üöÄ*