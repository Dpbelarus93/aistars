# ‚úÖ BACKEND API –ì–û–¢–û–í –ö –ó–ê–ü–£–°–ö–£

## üìã –ß—Ç–æ –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ

### üîß –û—Å–Ω–æ–≤–Ω—ã–µ –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã

#### 1. **–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –∏ –ù–∞—Å—Ç—Ä–æ–π–∫–∏**
- ‚úÖ `tsconfig.json` - TypeScript –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
- ‚úÖ `Dockerfile` - –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏–∑–∞—Ü–∏—è
- ‚úÖ `prisma/schema.prisma` - –ü–æ–ª–Ω–∞—è —Å—Ö–µ–º–∞ –ë–î
- ‚úÖ –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –ø–æ–¥–∫–ª—é—á–µ–Ω–∞ (PostgreSQL)

#### 2. **Middleware –∏ –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å**
- ‚úÖ `middleware/auth.ts` - JWT –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è
- ‚úÖ `middleware/errorHandler.ts` - –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫
- ‚úÖ RBAC —Å–∏—Å—Ç–µ–º–∞ —Ä–æ–ª–µ–π
- ‚úÖ Rate limiting
- ‚úÖ CORS –Ω–∞—Å—Ç—Ä–æ–π–∫–∏

#### 3. **–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –°–µ—Ä–≤–∏—Å–æ–≤**
- ‚úÖ `config/database.ts` - Prisma –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ
- ‚úÖ `config/logger.ts` - Winston –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
- ‚úÖ –°—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
- ‚úÖ Graceful shutdown

#### 4. **–û—Å–Ω–æ–≤–Ω–æ–µ –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ**
- ‚úÖ `src/app.ts` - Express —Å–µ—Ä–≤–µ—Ä
- ‚úÖ Socket.IO –¥–ª—è real-time
- ‚úÖ Middleware —Ü–µ–ø–æ—á–∫–∞
- ‚úÖ –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫

---

## üõ£Ô∏è API Endpoints

### üîê –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è (`/api/auth`)
- ‚úÖ `POST /register` - –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è
- ‚úÖ `POST /login` - –í—Ö–æ–¥
- ‚úÖ `GET /me` - –¢–µ–∫—É—â–∏–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å
- ‚úÖ `PUT /profile` - –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø—Ä–æ—Ñ–∏–ª—è
- ‚úÖ `PUT /change-password` - –°–º–µ–Ω–∞ –ø–∞—Ä–æ–ª—è
- ‚úÖ `POST /logout` - –í—ã—Ö–æ–¥

### üë• –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ (`/api/users`)
- ‚úÖ `GET /` - –°–ø–∏—Å–æ–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π (–ø–∞–≥–∏–Ω–∞—Ü–∏—è)
- ‚úÖ `GET /:id` - –ö–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å
- ‚úÖ `PUT /:id/status` - –ò–∑–º–µ–Ω–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞
- ‚úÖ `GET /managers/available` - –î–æ—Å—Ç—É–ø–Ω—ã–µ –º–µ–Ω–µ–¥–∂–µ—Ä—ã

### üìã –ó–∞–∫–∞–∑—ã (`/api/orders`)
- ‚úÖ `GET /` - –°–ø–∏—Å–æ–∫ –∑–∞–∫–∞–∑–æ–≤ (—Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è, –ø–∞–≥–∏–Ω–∞—Ü–∏—è)
- ‚úÖ `GET /:id` - –ö–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π –∑–∞–∫–∞–∑
- ‚úÖ `POST /` - –°–æ–∑–¥–∞–Ω–∏–µ –∑–∞–∫–∞–∑–∞
- ‚úÖ `PUT /:id` - –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∑–∞–∫–∞–∑–∞
- ‚úÖ `PUT /:id/assign` - –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ –º–µ–Ω–µ–¥–∂–µ—Ä–∞
- ‚úÖ `DELETE /:id` - –£–¥–∞–ª–µ–Ω–∏–µ –∑–∞–∫–∞–∑–∞

### üí¨ –ß–∞—Ç (`/api/chat`)
- ‚úÖ `GET /sessions` - –ß–∞—Ç-—Å–µ—Å—Å–∏–∏
- ‚úÖ `POST /sessions` - –°–æ–∑–¥–∞–Ω–∏–µ —Å–µ—Å—Å–∏–∏
- ‚úÖ `GET /sessions/:id/messages` - –°–æ–æ–±—â–µ–Ω–∏—è —Å–µ—Å—Å–∏–∏
- ‚úÖ `GET /orders/:id/messages` - –°–æ–æ–±—â–µ–Ω–∏—è –∑–∞–∫–∞–∑–∞
- ‚úÖ `POST /messages` - –û—Ç–ø—Ä–∞–≤–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏—è
- ‚úÖ `PUT /messages/:id/read` - –ü—Ä–æ—á–∏—Ç–∞–Ω–æ
- ‚úÖ `PUT /sessions/:id/close` - –ó–∞–∫—Ä—ã—Ç–∏–µ —Å–µ—Å—Å–∏–∏

### üìä –ê–Ω–∞–ª–∏—Ç–∏–∫–∞ (`/api/analytics`)
- ‚úÖ `GET /dashboard` - –û–±—â–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
- ‚úÖ `GET /orders-timeline` - –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∑–∞–∫–∞–∑–æ–≤
- ‚úÖ `GET /users-stats` - –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- ‚úÖ `GET /revenue-stats` - –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –¥–æ—Ö–æ–¥–æ–≤
- ‚úÖ `GET /ai-stats` - –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ AI-–∞–≥–µ–Ω—Ç–∞
- ‚úÖ `GET /events` - –°–æ–±—ã—Ç–∏—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∏

---

## üéØ –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å

### üîê –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å
- ‚úÖ JWT —Ç–æ–∫–µ–Ω—ã —Å –ø—Ä–æ–≤–µ—Ä–∫–æ–π
- ‚úÖ –•–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–∞—Ä–æ–ª–µ–π (bcrypt)
- ‚úÖ –í–∞–ª–∏–¥–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö (express-validator)
- ‚úÖ RBAC (CLIENT, MANAGER, CONTRACTOR, ADMIN)
- ‚úÖ Rate limiting
- ‚úÖ CORS –∑–∞—â–∏—Ç–∞

### üìä –ë–∞–∑–∞ –î–∞–Ω–Ω—ã—Ö
- ‚úÖ PostgreSQL —Å Prisma ORM
- ‚úÖ –ú–∏–≥—Ä–∞—Ü–∏–∏ –∏ –º–æ–¥–µ–ª–∏
- ‚úÖ –°–≤—è–∑–∏ –º–µ–∂–¥—É —Ç–∞–±–ª–∏—Ü–∞–º–∏
- ‚úÖ –ò–Ω–¥–µ–∫—Å—ã –∏ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è

### üîÑ Real-time
- ‚úÖ Socket.IO –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è
- ‚úÖ –ö–æ–º–Ω–∞—Ç—ã –¥–ª—è –∑–∞–∫–∞–∑–æ–≤
- ‚úÖ –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
- ‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω–∏—è —Å—Ç–∞—Ç—É—Å–æ–≤

### üìù –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
- ‚úÖ Winston —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
- ‚úÖ –†–æ—Ç–∞—Ü–∏—è –ª–æ–≥–æ–≤
- ‚úÖ –†–∞–∑–Ω—ã–µ —É—Ä–æ–≤–Ω–∏ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è
- ‚úÖ –õ–æ–≥–∏ –æ—à–∏–±–æ–∫ –∏ –¥–µ–π—Å—Ç–≤–∏–π

---

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ API

### –ë–∞–∑–æ–≤—ã–µ –¢–µ—Å—Ç—ã
```bash
# Health check
curl http://localhost:3001/api/health

# –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è
curl -X POST http://localhost:3001/api/auth/register \
  -H "Content-Type: application/json" \
  -d '{
    "email": "test@example.com",
    "password": "password123",
    "firstName": "Test",
    "lastName": "User"
  }'

# –í—Ö–æ–¥
curl -X POST http://localhost:3001/api/auth/login \
  -H "Content-Type: application/json" \
  -d '{
    "email": "test@example.com",
    "password": "password123"
  }'

# –°–æ–∑–¥–∞–Ω–∏–µ –∑–∞–∫–∞–∑–∞ (—Å —Ç–æ–∫–µ–Ω–æ–º)
curl -X POST http://localhost:3001/api/orders \
  -H "Content-Type: application/json" \
  -H "Authorization: Bearer YOUR_TOKEN" \
  -d '{
    "title": "–¢–µ—Å—Ç–æ–≤—ã–π –∑–∞–∫–∞–∑",
    "description": "–û–ø–∏—Å–∞–Ω–∏–µ –∑–∞–∫–∞–∑–∞",
    "category": "–ö–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏—è"
  }'
```

---

## üöÄ –ó–∞–ø—É—Å–∫ Backend

### 1. –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è
```bash
cp .env.example .env
# –ù–∞—Å—Ç—Ä–æ–π—Ç–µ DATABASE_URL, JWT_SECRET –∏ –¥—Ä—É–≥–∏–µ
```

### 2. –ó–∞–ø—É—Å–∫ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
```bash
# –ß–µ—Ä–µ–∑ Docker Compose
docker-compose up -d database

# –ò–ª–∏ –ª–æ–∫–∞–ª—å–Ω–æ PostgreSQL
createdb conserv_service
```

### 3. –ú–∏–≥—Ä–∞—Ü–∏–∏
```bash
npx prisma migrate dev
npx prisma generate
```

### 4. –ó–∞–ø—É—Å–∫ —Å–µ—Ä–≤–µ—Ä–∞
```bash
# Development
npm run dev

# Production
npm run build
npm start
```

---

## üìã –°—Ç–∞—Ç—É—Å –ì–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏

### ‚úÖ –ì–æ—Ç–æ–≤–æ –∫ –ü—Ä–æ–¥–∞–∫—à–µ–Ω—É
- ‚úÖ –í—Å–µ API endpoints —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã
- ‚úÖ –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è –∏ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è
- ‚úÖ –í–∞–ª–∏–¥–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö
- ‚úÖ –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫
- ‚úÖ –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
- ‚úÖ Real-time —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
- ‚úÖ –ê–Ω–∞–ª–∏—Ç–∏–∫–∞ –∏ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
- ‚úÖ –î–æ–∫–µ—Ä–∏–∑–∞—Ü–∏—è

### üîÑ –°–ª–µ–¥—É—é—â–∏–µ –®–∞–≥–∏
1. **–ó–∞–ø—É—Å–∫ –∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ**
2. **–°–æ–∑–¥–∞–Ω–∏–µ AI-–∞–≥–µ–Ω—Ç–∞**
3. **–†–∞–∑—Ä–∞–±–æ—Ç–∫–∞ Frontend**
4. **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –≤—Å–µ—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤**

---

## üìä –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

```
Backend API (Port 3001)
‚îú‚îÄ‚îÄ Authentication & Authorization
‚îú‚îÄ‚îÄ Orders Management
‚îú‚îÄ‚îÄ User Management  
‚îú‚îÄ‚îÄ Chat System
‚îú‚îÄ‚îÄ Analytics & Reporting
‚îú‚îÄ‚îÄ Real-time Notifications
‚îî‚îÄ‚îÄ Database Integration
```

---

## üéâ –ì–æ—Ç–æ–≤ –∫ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é!

Backend API **–ø–æ–ª–Ω–æ—Å—Ç—å—é –≥–æ—Ç–æ–≤** –∏ –º–æ–∂–µ—Ç –±—ã—Ç—å –∑–∞–ø—É—â–µ–Ω –ø—Ä—è–º–æ —Å–µ–π—á–∞—Å. –í—Å–µ –æ—Å–Ω–æ–≤–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ –∫–æ–Ω—Å–µ—Ä–≤—Å-—Å–µ—Ä–≤–∏—Å–∞ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã –∏ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω—ã.

**–ö–æ–º–∞–Ω–¥–∞ –∑–∞–ø—É—Å–∫–∞:**
```bash
cd –∫–æ–Ω—Å–µ—Ä–≤—Å-—Å–µ—Ä–≤–∏—Å/backend
npm install
npm run dev
```

*API –±—É–¥–µ—Ç –¥–æ—Å—Ç—É–ø–µ–Ω –ø–æ –∞–¥—Ä–µ—Å—É: http://localhost:3001*

---

**–°–æ–∑–¥–∞–Ω–æ: 16 —è–Ω–≤–∞—Ä—è 2025**  
**–°—Ç–∞—Ç—É—Å: ‚úÖ –ì–û–¢–û–í–û –ö –ó–ê–ü–£–°–ö–£**